<!DOCTYPE html>

<html>
<body>
  <canvas style="display: block; border: solid thin black" id="map" width="500" height="500">
    Not Supported
  </canvas>

  <textarea id="txtDump" style="width: 500px; height: 400px;"></textarea>

  <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
  <script>
  var canvas = document.getElementById('map');
  var ctx = canvas.getContext('2d');

  if (!navigator.geolocation) {
    canvas.innerHTML = "No geolocation";
  }

  var nodes = [];
  setInterval(function() {
    navigator.geolocation.getCurrentPosition(function(position) {
      var coords = [position.coords.latitude, position.coords.longitude];
      nodes.push(coords);

      ctx.setTransform(1, 0, 0, 1, 0, 0);
      ctx.fillStyle = 'white';
      ctx.fillRect(0, 0, 500, 500);
      ctx.translate(250, 250);

      var scale = 100000
      ctx.transform(scale, 0, 0, scale, 0, 0);
      ctx.lineWidth = 2.0/scale;

      ctx.moveTo(0, 0);
      ctx.beginPath();
      for (var i = nodes.length-1; i >= 0 ; i--) {
        ctx.lineTo(nodes[i][0] - coords[0], nodes[i][1] - coords[1])
      }
      ctx.stroke();

      document.getElementById('txtDump').value += '\n' + coords;
    }, function(er) {
      document.getElementById('txtDump').value += '\n ERORR: ' + er.message;
    }, {maximumAge:1000, timeout:750, enableHighAccuracy: true});
  }, 1000);

  </script>

</body>
</html>
